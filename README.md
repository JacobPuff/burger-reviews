# burger-reviews

This takes burger reviews and makes a graph.

> ## Setup
I suggest using `docker-compose`, but it's possible to use this without it. You can create a google form and link it so a spreadsheet, which is the way I did it. Below in the constants.json section it explains how to get the urls you'll need for that. The env vars are usefull for customization, and they allow for easy setup. Make a copy of `constants-example.json`, name it `constants.json`, and put it in the same directory.
> ## Env vars
#### BURGER_REVIEWS_DEV_MODE
Sets dev mode to either dev or prod. If it's not prod it treats the value as dev. The default is `dev`.
___
#### TOKEN_EXPIRE_TIME
This is how long a client has to use a CSRF token. The default is `1m`.
___
#### MAX_TOKENS_PER_IP
This limits how many requests you can get per TOKEN_EXPIRE_TIME. The default is `100`.
___
#### IS_HTTPS
This changes what we check a requests Referer header against. The defualt is `false`.
___
#### SERVER_DOMAIN
This is the domain you go to in your browser. The default is `localhost`.
___
#### SERVER_PORT
This is the port inside the main container. The default is `9090`.
___
#### SERVE_ON_PATH
This is the url path you will be serving on. Its used to remove the prefix of the path on the FileServer. The default is `/burgerreviews`.
___
#### CONSTANTS_PATH
Path to your constants file inside the container. The default is `constants.json`.
___
#### FRONTEND_DIR
The path to the directory of your frontend files. The default is `/app/frontend`.
___
#### REDIS_HOST
The URL of the redis service you want to use. Only change if you aren't going to be using docker-compose. The default is `burger-reviews-redis`.
___
#### REDIS_PORT
The port your redis service is using. The default is `6379`.
___
#### REDIS_DB
The database you will be using in redis. The default is `0`.
___
#### REDIS_USER
The user you will be using with redis. The default is empty.
___
#### REDIS_PASSWORD
The password you will be using with redis. The default is empty.
___
> ## The constants.json file
#### prodSheetsCsvUrl
The download url for your prod spreadsheet CSV file. In the case of google sheets, open up the dev console, Go to File > Download > CSV, and get the url of the download request. It starts with `export?format=csv`.
___
#### devSheetsCsvUrl
The download url for your dev spreadsheet CSV file.
___
#### formUrl
This is the url for your google forms response endpoint. It should end with `/formResponse`. If your url ends with `/viewForm` you can replace it
with `/formResponse`.
___
#### fields
This is the map from human readable names to google forms autogenerated names. You can find these by making a pre-filled form link
and the fields will be listed in the url like `entry.000000000`. I suggest filling each field with the field name to know which is which.
___
#### groups
This is a list of every group you've had. This keeps the index of each group the same so you know which reviews came from which group.
___
#### activeGroups
This is all the groups you currently want enabled. So if someone was sending in 100+ responses each minute, you could disable that group
and repair anything you need to like deleting skewed reviews. I was thinking about how I could disable a group and make them have users, but leave others open.
___